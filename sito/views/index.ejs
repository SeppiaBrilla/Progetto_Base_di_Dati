<!DOCTYPE html>
<html>
  <head>
    <title>Result</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script type="text/javascript">
        var queries = [
        "INSERT INTO `Videogiochi_e_software`.`Categoria` (`Nome`, `derivazione`) VALUES ('Souls-Like', 'Action'); \n INSERT INTO `Videogiochi_e_software`.`Tipologia` (`Nome_prodotto`, `Anno`, `Nome_Categoria`) VALUES ('Cuphead', '2018', 'Souls-Like');",
        "INSERT INTO `Videogiochi_e_software`.`Compagnia` (`Nome`, `Fondazione`, `Nazionalita`) VALUES ('WayForward', 1998, 'USA');",
        "INSERT INTO `Videogiochi_e_software`.`Console` (`Nome`, `Data_Uscita`, `Supporto`, `Compagnia`, `Generazione`) VALUES ('XBox One', '2014-01-02', '1', 'Microsoft', '8');",
        "INSERT INTO `Videogiochi_e_software`.`Designer` (`Nome`, `Cognome`, `Nazionalita`) VALUES ('Eduardo', 'Caetano', 'Spagna');",
        "INSERT INTO `Videogiochi_e_software`.`Disponibilita` (`Nome_prodotto`, `Anno`, `Nome_store`, `Processore`, `Scheda_Grafica`, `Os`) VALUES ('Final Fantasy 2', 1980, 'Steam', 'i3', 'integrata', 'Windows 7');",
        "INSERT INTO `Videogiochi_e_software`.`Riproducibilita` (`Nome_Gioco`, `Anno`, `Nome_Console`) VALUES ('Final Fantasy 2', 1980, 'Switch');",
        "INSERT INTO `Videogiochi_e_software`.`Prodotto` (`Nome`, `Anno`, `Prezzo`, `Descrizione`, `Produttore`, `Sviluppatore`, `Gioco`) VALUES ('Skype', 2001, '0.00', 'Videochiamate male', 'Microsoft', 'Microsoft', '0');",
        "INSERT INTO `Videogiochi_e_software`.`Prodotto` (`Nome`, `Anno`, `Prezzo`, `Descrizione`, `Produttore`, `Sviluppatore`, `Gioco`, `Saga`) VALUES ('Zelda 2', 1987, '39.90', 'Zelda metroidvania', 'Nintendo', 'Nintendo', '1', 'The Legend Of Zelda'); \nINSERT INTO `Videogiochi_e_software`.`Progettazione` (`Id_designer`, `Nome`, `Anno`) VALUES ('1', 'Zelda 2', 1987);\nINSERT INTO `Videogiochi_e_software`.`Tipologia` (`Nome_prodotto`, `Anno`, `Nome_Categoria`) VALUES ('Zelda 2', 1987, 'Action');\nINSERT INTO `Videogiochi_e_software`.`Tipologia` (`Nome_prodotto`, `Anno`, `Nome_Categoria`) VALUES ('Zelda 2 ', 1987, 'Platform');\nINSERT INTO `Videogiochi_e_software`.`Riproducibilita` (`Nome_Gioco`, `Anno`, `Nome_Console`) VALUES ('Zelda 2', 1987, 'NES');\nINSERT INTO `Videogiochi_e_software`.`Disponibilita` (`Nome_prodotto`, `Anno`, `Nome_store`, `Processore`, `Scheda_Grafica`, `Os`) VALUES ('Zelda 2', 1987, 'Microsoft Store', 'i3', 'integrata', 'Windows 8');",
        "INSERT INTO `Videogiochi_e_software`.`Recensione` (`Nome`, `Anno`, `Utente`, `Voto`) VALUES ('Wii Sport', 2006, 'SeppiaBrilla', '5');",
        "INSERT INTO `Videogiochi_e_software`.`Saga` (`Nome`, `Descrizione`, `Stato`) VALUES ('Super Mario', 'Picchi gli ddei', 'In Corso'); \n UPDATE `Videogiochi_e_software`.`Prodotto` SET `Saga` = 'Super Mario' WHERE (`Nome` = 'Super Mario Odissey') and (`Anno` = 2018);",
        "INSERT INTO `Videogiochi_e_software`.`Store_PC` (`Nome`, `Compagnia`) VALUES ('UPlay', 'Ubisoft');",
        "INSERT INTO `Videogiochi_e_software`.`Utente` (`Nickname`) VALUES ('Agatha Cristie');",
        "SELECT Nome FROM Videogiochi_e_software.Categoria;",
        "SELECT Nome_Prodotto AS Nome, Anno, Valutazione \n FROM Videogiochi_e_software.Categoria AS Cat NATURAL JOIN ( \n SELECT Tipo.Nome_Categoria AS Nome, Prod.Nome AS Nome_prodotto, Prod.Anno AS ANNO, Prod.Valutazione AS Valutazione \n FROM Videogiochi_e_software.Tipologia AS Tipo INNER JOIN Videogiochi_e_software.ProdRecen AS Prod ON Tipo.Nome_prodotto = Prod.Nome AND Tipo.Anno = Prod.Anno \n WHERE Prod.Gioco IS TRUE) AS Giochi \n WHERE Nome='Sport';",
        "SELECT * FROM Videogiochi_e_software.Compagnia;",
        "SELECT * FROM Videogiochi_e_software.Console;",
        "SELECT * FROM Videogiochi_e_software.Designer;",
        "SELECT Giochi.Nome AS Nome, Giochi.Anno AS Anno, Giochi.Valutazione AS Valutazione \n FROM Videogiochi_e_software.Riproducibilita AS Rip INNER JOIN Videogiochi_e_software.ProdRecen AS Giochi ON Rip.Nome_Gioco = Giochi.Nome AND Rip.Anno = Giochi.Anno \n WHERE Giochi.Gioco IS TRUE AND Rip.Nome_Console = 'Playstation 4' \n ORDER BY Giochi.Valutazione DESC;",
        "SELECT Giochi.Nome AS Nome, Giochi.Anno AS Anno, Giochi.Valutazione AS Valutazione \n FROM Videogiochi_e_software.Disponibilita AS Disp INNER JOIN Videogiochi_e_software.ProdRecen AS Giochi ON Disp.Nome_prodotto = Giochi.Nome AND Disp.Anno = Giochi.Anno \n WHERE Giochi.Gioco IS TRUE AND Disp.Nome_Store= 'Steam';",
        "SELECT Nome, Anno, Prezzo Descrizione, Produttore, Sviluppatore, Valutazione  \n FROM Videogiochi_e_software.ProdRecen;",
        "SELECT Nome, Anno, Prezzo Descrizione, Produttore, Sviluppatore, Saga, Valutazione \n FROM Videogiochi_e_software.ProdRecen \n WHERE Gioco IS TRUE \n ORDER BY Valutazione DESC;",
        "SELECT Nome, Anno, Prezzo Descrizione, Produttore, Sviluppatore, Saga, Valutazione \n FROM Videogiochi_e_software.ProdRecen \n WHERE Gioco IS FALSE;",
        "SELECT Des.Nome AS Nome, Des.Cognome AS Cognome, Des.Nazionalita AS Nazionalita \n FROM Videogiochi_e_software.Designer AS Des INNER JOIN ( \n SELECT id_designer \n FROM Videogiochi_e_software.Progettazione NATURAL JOIN Videogiochi_e_software.Prodotto \n WHERE Nome='Cuphead' AND Anno=2018) AS Id ON Des.Id = Id.Id_designer;",
        "SELECT * FROM Videogiochi_e_software.Saga;",
        "SELECT P.Nome AS Nome, P.Anno AS Anno, P.Prezzo AS Prezzo, P.Descrizione AS Descrizione, P.Valutazione as Valutazione \n FROM Videogiochi_e_software.ProdRecen AS P INNER JOIN Videogiochi_e_software.Saga AS S ON P.Saga = S.Nome \n WHERE S.Nome='The Legend Of Zelda' AND P.Gioco IS TRUE;",
        "SELECT DISTINCT C.Nome AS Compagnie \n FROM Videogiochi_e_software.Compagnia AS C INNER JOIN Videogiochi_e_software.Prodotto AS P ON C.Nome = P.Produttore;",
        "SELECT DISTINCT C.Nome AS Compagnie \n FROM Videogiochi_e_software.Compagnia AS C INNER JOIN Videogiochi_e_software.Prodotto AS P ON C.Nome = P.Sviluppatore;",
        "SELECT S.Nome AS Store \n FROM Videogiochi_e_software.Compagnia AS C INNER JOIN Videogiochi_e_software.Store_PC AS S ON C.Nome = S.Compagnia \n WHERE C.Nome = 'Microsoft';",
        "SELECT Con.Nome AS Console \n FROM Videogiochi_e_software.Compagnia AS C INNER JOIN Videogiochi_e_software.Console AS Con ON C.Nome = Con.Compagnia \n WHERE C.Nome = 'Nintendo';",
        "SELECT Nome AS Gioco, Anno, Voto \n FROM Videogiochi_e_software.Recensione \n WHERE Utente = 'SeppiaBrilla';",
        "UPDATE `Videogiochi_e_software`.`Recensione` SET `Voto` = '4' WHERE (`Nome` = 'Wii Sport') and (`Anno` = 2006) and (`Utente` = 'SeppiaBrilla');",
        "UPDATE `Videogiochi_e_software`.`Prodotto` SET `Prezzo` = '4.99' WHERE (`Nome` = 'Zelda 2') and (`Anno` = 1987);",
        "UPDATE `Videogiochi_e_software`.`Prodotto` SET `Saga` = 'Super Mario' WHERE (`Nome` = 'Zelda 2') and (`Anno` = 1987);",
        "WITH RECURSIVE Principale(Derivato, Derivante) AS \n (	SELECT Nome, derivazione \n FROM Videogiochi_e_software.Categoria \n UNION ALL \n SELECT Nome, Derivante \n FROM Principale, Videogiochi_e_software.Categoria \n WHERE Derivato = derivazione \n ) \n SELECT Derivato as Categorie \n FROM Principale \n WHERE Derivante = 'RPG';",
        " SELECT DISTINCT Compagnia.Nome AS Nome, Compagnia.Fondazione AS Fondazione, Compagnia.Nazionalita AS Nazionalita \n FROM Designer, Progettazione,  \n Prodotto, Compagnia \n WHERE Designer.Id = Progettazione.Id_designer AND Progettazione.Nome = Prodotto.Nome AND Progettazione.Anno = Prodotto.Anno AND Prodotto.Produttore = Compagnia.Nome AND Prodotto.Sviluppatore = Compagnia.Nome AND Designer.Id = 1;",
        "SELECT Generazione, MIN(Data_Uscita) AS Inizio \n FROM Videogiochi_e_software.Console \n WHERE Supporto IS TRUE \n GROUP BY Generazione;",
        "SELECT Prod.Nome AS Nome, Prod.Prezzo AS Prezzo \n FROM Videogiochi_e_software.Prodotto AS Prod INNER JOIN Videogiochi_e_software.Compagnia AS Comp ON Prod.Produttore = Comp.Nome \n WHERE Prod.Gioco IS FALSE AND Comp.Nome='Microsoft' \n ORDER BY Prod.Prezzo;",
        "SELECT DISTINCT Prod.Sviluppatore AS Sviluppatori \n ROM Videogiochi_e_software.Compagnia AS Comp INNER JOIN Videogiochi_e_software.Prodotto AS Prod ON Comp.Nome = Prod.Produttore \nWHERE Comp.Nome = 'Microsoft' AND Prod.Gioco IS TRUE;"
        ];
        $(document).ready(()=>{
            $("#query").html(queries[$("#select").val()]);
            $("#select").on("change",()=>{
                $("#query").html(queries[$("#select").val()]);
            });
            $("#send").click(()=>{
                $.ajax({
                    url:"http://localhost:8000/query",
                    method:"POST",
                    data:{query: queries[$("#select").val()]},
                    success:function(){console.log("finito")}
                })
            })
        });
    </script>
</head>
  <body>
    <div class="row">
        <select class="form-select col-sm-2" id="select">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
            <option value="25">25</option>
            <option value="26">26</option>
            <option value="27">27</option>
            <option value="28">28</option>
            <option value="29">29</option>
            <option value="30">30</option>
            <option value="31">31</option>
            <option value="32">32</option>
            <option value="33">33</option>
            <option value="34">34</option>
            <option value="35">35</option>
            <option value="36">36</option>
            <option value="37">37</option>
            <option value="38">38</option>
        </select>
        <div id="query" class="col-sm-6"></div>
        <button id="send">esegui</button>
    </div>
  </body>
</html>